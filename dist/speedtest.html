<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Speed Typing Test — Animated</title>
  <style>
    :root {
      --bg: #0b1220;
      --panel: #121a2b;
      --panel-2: #0f1626;
      --text: #e6edf3;
      --muted: #93a4b7;
      --accent: #7cc4ff;
      --accent-2: #52ffa8;
      --danger: #ff7a7a;
      --caret: #ffe17a;
      --ring: 0 0 0 3px rgba(124,196,255,.25);
      --radius: 16px;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    [data-theme="light"] {
      --bg: #f6f8fb;
      --panel: #ffffff;
      --panel-2: #f1f5fb;
      --text: #0b1220;
      --muted: #4b5563;
      --accent: #2563eb;
      --accent-2: #059669;
      --danger: #dc2626;
      --caret: #f59e0b;
      --ring: 0 0 0 3px rgba(37,99,235,.25);
      --shadow: 0 10px 30px rgba(2,8,23,.08);
    }
    * { box-sizing: border-box }
    html, body { height: 100% }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell,
        Noto Sans, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      color: var(--text);
      background: radial-gradient(1200px 800px at 80% -10%, #1b2540 0%, transparent 60%),
                  radial-gradient(1000px 600px at -10% -20%, #1a3a3a 0%, transparent 65%),
                  var(--bg);
      display: grid;
      place-items: center;
      padding: 32px 16px;
      transition: background-color .4s ease, color .4s ease, filter .3s ease;
    }
    .container { width: min(1100px, 100%); display: grid; gap: 16px }
    .card {
      background: linear-gradient(180deg, var(--panel) 0%, var(--panel-2) 100%);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      border: 1px solid rgba(255,255,255,.06);
      padding: 20px;
      transition: transform .25s ease, box-shadow .25s ease, background .25s ease;
    }
    .card:hover { transform: translateY(-2px); box-shadow: 0 15px 40px rgba(0,0,0,.45) }
    header { display: flex; align-items: center; justify-content: space-between; gap: 12px }
    .title { font-weight: 800; font-size: clamp(18px, 2vw, 24px); letter-spacing: .3px; display: flex; gap: 10px; align-items: center }
    .title .logo { width: 28px; height: 28px; border-radius: 8px; background: linear-gradient(135deg, var(--accent), var(--accent-2)); display: grid; place-items: center; color:#04142b; font-weight:900; box-shadow: 0 6px 16px rgba(124,196,255,.45) }
    .controls { display: flex; gap: 8px; align-items: center; flex-wrap: wrap }
    .btn { appearance: none; border: 1px solid rgba(255,255,255,.1); background: transparent; color: var(--text); padding: 10px 14px; border-radius: 12px; cursor: pointer; transition: transform .15s ease, box-shadow .15s ease, background .2s ease; font-weight: 600 }
    .btn:hover { transform: translateY(-1px) scale(1.02); box-shadow: var(--ring) }
    .btn:active { transform: translateY(0) scale(.98) }
    .btn.primary { background: linear-gradient(135deg, var(--accent), var(--accent-2)); color: #03121f; border: none }
    .btn.ghost { color: var(--muted) }
    .segmented { display: inline-flex; background: rgba(255,255,255,.05); border-radius: 12px; padding: 4px }
    .segmented button { border-radius: 10px; padding: 8px 12px; border: none; background: transparent; color: var(--muted); font-weight:700; cursor: pointer; transition: background .25s ease, transform .2s ease }
    .segmented button.active { background: var(--panel); color: var(--text); box-shadow: var(--ring) }

    .typing-card { padding: 24px; overflow:hidden }
    .text { user-select: none; line-height: 1.8; font-size: clamp(16px, 2.2vw, 20px); letter-spacing: .2px; min-height: 130px; border-radius: 12px; padding: 18px 14px; background: rgba(255,255,255,.03); border: 1px dashed rgba(255,255,255,.12); position: relative }
    .text span { position: relative; padding: 2px 1px; border-radius: 4px; transition: background-color .2s ease, color .2s ease, transform .12s ease }
    .text span.correct { color: #7fe1a6 }
    .text span.incorrect { color: var(--danger); background: rgba(255,122,122,.12) }
    .text span.current { outline: 2px solid var(--caret); background: rgba(255,225,122,.08) }
    /* caret blink */
    .text span.current { animation: caretBlink 1s step-end infinite }
    @keyframes caretBlink { 50% { outline-color: transparent } }
    /* hit pop */
    .hit { transform: translateY(-1px) scale(1.12); filter: drop-shadow(0 0 0 rgba(82,255,168,0)); animation: hitPop .18s ease; }
    @keyframes hitPop { 50% { transform: translateY(-1px) scale(1.18) } }
    /* shake for errors */
    .shake { animation: shake .22s ease }
    @keyframes shake { 20% { transform: translateX(-1px) } 40% { transform: translateX(1.5px) } 60% { transform: translateX(-1px) } 80% { transform: translateX(.8px) } }

    .metrics { display: grid; grid-template-columns: repeat(4, minmax(120px, 1fr)); gap: 12px }
    .metric { background: rgba(255,255,255,.04); padding: 14px; border-radius: 12px; border:1px solid rgba(255,255,255,.06); transition: transform .25s ease }
    .metric .label { color: var(--muted); font-size: 12px; text-transform: uppercase; letter-spacing:.8px }
    .metric .value { font-size: 28px; font-weight: 800 }

    .row { display:flex; gap:12px; align-items:center; flex-wrap:wrap }
    .muted { color: var(--muted) }
    .kbd { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; padding: 2px 6px; border-radius: 6px; background: rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.1) }

    .grid { display: grid; gap: 12px; grid-template-columns: 1fr 320px }
    @media (max-width: 900px) { .grid { grid-template-columns: 1fr } }

    .scores h3 { margin: 0 0 8px 0 }
    .score-list { display: grid; gap: 8px }
    .score-item { display: flex; justify-content: space-between; background: rgba(255,255,255,.04); padding: 10px 12px; border-radius: 10px; border:1px solid rgba(255,255,255,.06) }
    .score-item small { color: var(--muted) }

    .footer { text-align:center; color: var(--muted); font-size: 13px }
    .link { color: var(--accent); text-decoration: none }
    .link:hover { text-decoration: underline }

    input#hiddenInput { position: absolute; opacity: 0; pointer-events: none }

    /* -------- Timer warning pulse -------- */
    .warning #timeLeft { animation: pulse .8s ease-in-out infinite }
    @keyframes pulse { 0%,100% { transform: scale(1); color: var(--text) } 50% { transform: scale(1.12); color: var(--danger) } }

    /* -------- Results slide-up panel + overlay -------- */
    .overlay { position: fixed; inset: 0; background: rgba(0,0,0,.45); opacity: 0; pointer-events: none; transition: opacity .35s ease; }
    .results { position: fixed; left: 50%; bottom: 0; transform: translate(-50%, 110%); width: min(720px, 94%); border-radius: 20px 20px 0 0; background: linear-gradient(180deg, var(--panel), var(--panel-2)); border:1px solid rgba(255,255,255,.08); box-shadow: 0 -20px 40px rgba(0,0,0,.45); padding: 22px; z-index: 20; transition: transform .5s cubic-bezier(.22,.9,.22,1) }
    .results .big { font-size: 48px; font-weight: 900; letter-spacing: .6px }
    .results .rowline { display:flex; gap: 10px; flex-wrap: wrap; margin-top: 12px }
    .results .pill { background: rgba(255,255,255,.05); border:1px solid rgba(255,255,255,.08); padding: 10px 12px; border-radius: 999px }
    .show-results .overlay { opacity: 1; pointer-events: auto }
    .show-results .results { transform: translate(-50%, 0) }

    /* -------- Speed streak (forward rush) -------- */
    .streak { position: fixed; inset: 0; display: grid; place-items: center; pointer-events: none; z-index: 30; }
    .streak .line { position: absolute; left: 50%; top: 50%; width: 42vmax; height: 2px; background: linear-gradient(90deg, rgba(255,255,255,.0) 0%, rgba(124,196,255,.9) 40%, rgba(124,196,255,.0) 100%); transform-origin: 0% 50%; opacity: 0; filter: blur(.5px) }
    .streak.play .line { animation: rush .75s cubic-bezier(.2,.9,.2,1) forwards }
    @keyframes rush { 0% { transform: translate(-50%, -50%) rotate(var(--angle)) scaleX(0); opacity: .95 } 65% { opacity: .75 } 100% { transform: translate(-50%, -50%) rotate(var(--angle)) scaleX(1); opacity: 0 } }

  </style>
</head>
<body>
  <input id="hiddenInput" autocomplete="off" />
  <div class="container">
    <header class="card">
      <div class="title"><span class="logo">✦</span> Speed Typing Test</div>
      <div class="controls">
        <div class="segmented" role="group" aria-label="Test duration">
          <button data-time="15" class="active" title="15 seconds">15s</button>
          <button data-time="30" title="30 seconds">30s</button>
          <button data-time="60" title="60 seconds">60s</button>
        </div>
        <button id="btnStart" class="btn primary" title="Start (or press any key)">Start</button>
        <button id="btnReset" class="btn ghost" title="Reset">Reset</button>
        <button id="btnTheme" class="btn ghost" title="Toggle theme">Toggle Theme</button>
      </div>
    </header>

    <div class="grid">
      <section class="card typing-card">
        <div class="row" style="justify-content:space-between; margin-bottom:8px">
          <div class="muted">Click anywhere and start typing. Use <span class="kbd">Backspace</span> to correct.</div>
          <div class="muted">Time left: <strong id="timeLeft">15</strong>s</div>
        </div>
        <div id="text" class="text" aria-live="polite"></div>
        <div class="row" style="margin-top:12px; justify-content:space-between">
          <div class="metrics" aria-label="Live metrics">
            <div class="metric"><div class="label">WPM</div><div id="wpm" class="value">0</div></div>
            <div class="metric"><div class="label">Accuracy</div><div id="accuracy" class="value">100%</div></div>
            <div class="metric"><div class="label">Keystrokes</div><div id="keystrokes" class="value">0</div></div>
            <div class="metric"><div class="label">Errors</div><div id="errors" class="value">0</div></div>
          </div>
        </div>
      </section>

      <aside class="card scores">
        <h3 style="margin-top:0">High Scores</h3>
        <div class="muted" style="margin-bottom:8px">Best results saved locally on your device.</div>
        <div id="scoreList" class="score-list"></div>
        <div class="row" style="margin-top:12px">
          <button id="btnExport" class="btn" title="Export scores to CSV">Export CSV</button>
          <button id="btnClear" class="btn ghost" title="Clear all scores">Clear</button>
        </div>
      </aside>
    </div>

    <p class="footer">Built with vanilla HTML/CSS/JS + micro-animations. Tip: Press <span class="kbd">Esc</span> to pause/resume.</p>
  </div>

  <!-- Overlay + Slide-up results -->
  <div class="overlay" id="overlay" aria-hidden="true"></div>
  <div class="results" id="results" role="dialog" aria-modal="true" aria-labelledby="resTitle">
    <div style="display:flex; justify-content: space-between; align-items: center; gap: 8px">
      <div>
        <div id="resTitle" class="muted" style="text-transform:uppercase; letter-spacing:.8px">Your Result</div>
        <div id="resWpm" class="big">0 WPM</div>
      </div>
      <div class="rowline">
        <span class="pill"><strong id="resAcc">100%</strong> acc</span>
        <span class="pill"><strong id="resErr">0</strong> errors</span>
        <span class="pill"><strong id="resKeys">0</strong> keys</span>
        <span class="pill"><strong id="resDur">15</strong>s</span>
      </div>
    </div>
    <div class="rowline" style="justify-content:flex-end; margin-top:14px">
      <button id="btnRetry" class="btn">Retry</button>
      <button id="btnNext" class="btn primary">Next Test</button>
    </div>
  </div>

  <!-- Speed streak container (generated lines added by JS) -->
  <div class="streak" id="streak" aria-hidden="true"></div>

  <script>
    // ------------------------ Data ------------------------
    const PASSAGES = [
      "Typing speed comes from accuracy and rhythm. Relax your shoulders and breathe.",
      "JavaScript can be elegant when you keep your functions pure and your names clear.",
      "To type faster, look at the next word rather than the one under your fingers.",
      "Small habits compound into remarkable results. Start with one minute each day.",
      "A keyboard is a musical instrument; good posture turns effort into flow.",
      "Clarity is kindness. Write so your future self can understand without effort.",
      "Latency hides in plain sight. Measure before you optimize anything.",
      "Consistency beats intensity. A little progress today is better than waiting for perfect.",
      "Brevity is power. Cut unnecessary words and your ideas will move faster.",
      "Practice makes permanent, so practice the right thing with mindful focus."
    ];

    // ------------------------ State ------------------------
    const els = {
      container: document.querySelector('.container'),
      text: document.getElementById('text'),
      timeLeft: document.getElementById('timeLeft'),
      wpm: document.getElementById('wpm'),
      accuracy: document.getElementById('accuracy'),
      keystrokes: document.getElementById('keystrokes'),
      errors: document.getElementById('errors'),
      start: document.getElementById('btnStart'),
      reset: document.getElementById('btnReset'),
      theme: document.getElementById('btnTheme'),
      segmented: document.querySelector('.segmented'),
      scoreList: document.getElementById('scoreList'),
      export: document.getElementById('btnExport'),
      clear: document.getElementById('btnClear'),
      hiddenInput: document.getElementById('hiddenInput'),
      overlay: document.getElementById('overlay'),
      results: document.getElementById('results'),
      resWpm: document.getElementById('resWpm'),
      resAcc: document.getElementById('resAcc'),
      resErr: document.getElementById('resErr'),
      resKeys: document.getElementById('resKeys'),
      resDur: document.getElementById('resDur'),
      btnRetry: document.getElementById('btnRetry'),
      btnNext: document.getElementById('btnNext'),
      streak: document.getElementById('streak'),
    };

    let config = { duration: 15 };
    let state = {};

    function pickPassage() { return PASSAGES[Math.floor(Math.random() * PASSAGES.length)] }

    function initTest() {
      state = {
        passage: pickPassage(),
        chars: [], // span elements
        index: 0,
        started: false,
        paused: false,
        timerId: null,
        startTime: null,
        timeLeft: config.duration,
        keystrokes: 0,
        errors: 0,
        correct: 0,
      };
      renderPassage(state.passage);
      updateMetrics();
      els.timeLeft.textContent = state.timeLeft;
      els.hiddenInput.value = '';
      document.body.classList.remove('warning');
    }

    function renderPassage(text) {
      els.text.innerHTML = '';
      state.chars = [];
      for (const ch of text) {
        const span = document.createElement('span');
        span.textContent = ch;
        els.text.appendChild(span);
        state.chars.push(span);
      }
      highlightCurrent();
      // entry animation
      els.text.style.opacity = 0;
      els.text.style.transform = 'translateY(6px)';
      requestAnimationFrame(()=>{
        els.text.style.transition = 'opacity .35s ease, transform .35s ease';
        els.text.style.opacity = 1;
        els.text.style.transform = 'translateY(0)';
        setTimeout(()=>{ els.text.style.transition = '' }, 380);
      })
    }

    function highlightCurrent() {
      state.chars.forEach(ch => ch.classList.remove('current'));
      const cur = state.chars[state.index];
      if (cur) cur.classList.add('current');
    }

    function startTimer() {
      state.started = true;
      state.startTime = performance.now();
      const start = Date.now();
      state.timerId = setInterval(() => {
        if (state.paused) return;
        const elapsed = Math.floor((Date.now() - start) / 1000);
        state.timeLeft = Math.max(0, config.duration - elapsed);
        els.timeLeft.textContent = state.timeLeft;
        document.body.classList.toggle('warning', state.timeLeft <= 5 && state.timeLeft > 0);
        updateMetrics();
        if (state.timeLeft <= 0) finishTest();
      }, 100);
    }

    function pauseResume() {
      if (!state.started) return;
      state.paused = !state.paused;
      els.container.style.filter = state.paused ? 'grayscale(0.6)' : '';
    }

    function onKey(e) {
      if (e.key === 'Escape') { e.preventDefault(); pauseResume(); return; }
      if (state.paused) return;

      if (!state.started) startTimer();

      // prevent default scrolling on space
      if (e.key === ' ' || e.key === 'ArrowUp' || e.key === 'ArrowDown') e.preventDefault();

      if (e.key === 'Backspace') {
        if (state.index > 0) {
          state.index--;
          const ch = state.chars[state.index];
          if (ch.classList.contains('incorrect')) { state.errors--; }
          if (ch.classList.contains('correct')) { state.correct--; }
          ch.classList.remove('correct','incorrect','hit','shake');
          highlightCurrent();
        }
        return;
      }

      const cur = state.chars[state.index];
      if (!cur) return; // finished passage

      const expected = cur.textContent;
      const typed = e.key.length === 1 ? e.key : null;
      if (!typed) return;

      state.keystrokes++;
      if (typed === expected) {
        cur.classList.add('correct','hit');
        state.correct++;
      } else {
        cur.classList.add('incorrect','shake');
        state.errors++;
      }
      // cleanup micro-classes after animation completes
      setTimeout(()=>cur.classList.remove('hit','shake'), 220);

      state.index++;
      highlightCurrent();
      updateMetrics();

      // auto-advance when finished passage (loops new one seamlessly)
      if (state.index >= state.chars.length) {
        state.passage = pickPassage();
        renderPassage(state.passage);
        state.index = 0;
      }
    }

    function updateMetrics() {
      const elapsedMs = state.started ? Math.max(1, (performance.now() - state.startTime)) : 1;
      const minutes = elapsedMs / 60000;
      const wpm = Math.round((state.correct / 5) / minutes) || 0;
      const acc = state.keystrokes ? Math.max(0, Math.min(100, Math.round((state.correct / state.keystrokes) * 100))) : 100;
      els.wpm.textContent = wpm;
      els.accuracy.textContent = acc + '%';
      els.keystrokes.textContent = state.keystrokes;
      els.errors.textContent = state.errors;
    }

    function finishTest() {
      clearInterval(state.timerId);
      state.started = false;
      updateMetrics();
      const result = {
        wpm: parseInt(els.wpm.textContent, 10),
        accuracy: parseInt(els.accuracy.textContent, 10),
        keystrokes: state.keystrokes,
        errors: state.errors,
        duration: config.duration,
        date: new Date().toISOString()
      };
      saveScore(result);
      // Update results UI
      els.resWpm.textContent = result.wpm + ' WPM';
      els.resAcc.textContent = result.accuracy + '%';
      els.resErr.textContent = result.errors;
      els.resKeys.textContent = result.keystrokes;
      els.resDur.textContent = result.duration;
      // Play speed streak first, then reveal panel
      playSpeedStreak(() => showResults());
    }

    function showResults() {
      document.body.classList.add('show-results');
      els.overlay.setAttribute('aria-hidden','false');
    }
    function hideResults() {
      document.body.classList.remove('show-results');
      els.overlay.setAttribute('aria-hidden','true');
    }

    // ------------------------ Speed Streak (Forward Rush) ------------------------
    function buildStreakLines() {
      if (els.streak.childElementCount) return; // build once
      const COUNT = 28; // balanced for medium intensity
      for (let i=0;i<COUNT;i++) {
        const d = document.createElement('div');
        d.className = 'line';
        const angle = (360/COUNT) * i + (i%2? 3 : -3); // small jitter to feel organic
        d.style.setProperty('--angle', angle + 'deg');
        d.style.animationDelay = (i*8) + 'ms';
        els.streak.appendChild(d);
      }
    }
    function playSpeedStreak(done) {
      buildStreakLines();
      els.streak.classList.add('play');
      // remove class after animation and call done
      setTimeout(() => {
        els.streak.classList.remove('play');
        if (typeof done === 'function') done();
      }, 800);
    }

    // ------------------------ Scores ------------------------
    const LS_KEY = 'typingTestHighScores.v1';
    function loadScores() { try { return JSON.parse(localStorage.getItem(LS_KEY)) || []; } catch { return []; } }
    function saveScore(s) {
      const scores = loadScores();
      scores.push(s);
      scores.sort((a,b)=> b.wpm - a.wpm || b.accuracy - a.accuracy);
      const trimmed = scores.slice(0, 10);
      localStorage.setItem(LS_KEY, JSON.stringify(trimmed));
      renderScores();
    }
    function clearScores() { localStorage.removeItem(LS_KEY); renderScores(); }
    function renderScores() {
      const scores = loadScores();
      els.scoreList.innerHTML = scores.length ? '' : '<div class="muted">No scores yet. Finish a test to save a high score.</div>';
      scores.forEach((s, i) => {
        const row = document.createElement('div');
        row.className = 'score-item';
        const date = new Date(s.date).toLocaleString();
        row.innerHTML = `<div><strong>#${i+1}</strong> — ${s.wpm} WPM <small>(${s.accuracy}% acc)</small></div><div><small>${s.duration}s • ${date}</small></div>`;
        els.scoreList.appendChild(row);
      })
    }
    function exportCSV() {
      const scores = loadScores();
      if (!scores.length) { announce('No scores to export yet.'); return; }
      const header = ['wpm','accuracy','keystrokes','errors','duration','date'];
      const rows = [header.join(',')].concat(scores.map(s => header.map(k => s[k]).join(',')));
      const blob = new Blob([rows.join('\n')], { type: 'text/csv' });

      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download = 'typing-scores.csv'; a.click(); URL.revokeObjectURL(url);
    }

    // ------------------------ Theme ------------------------
    function applyTheme(t){ document.documentElement.setAttribute('data-theme', t) }
    function toggleTheme(){ const t = document.documentElement.getAttribute('data-theme') === 'light' ? '' : 'light'; applyTheme(t); localStorage.setItem('typingTheme', t) }
    function loadTheme(){ const t = localStorage.getItem('typingTheme') || ''; applyTheme(t) }

    // ------------------------ Setup ------------------------
    function bindControls(){
      els.start.addEventListener('click', () => { if (state.started) return; initTest(); focusInput(); });
      els.reset.addEventListener('click', () => { initTest(); focusInput(); announce('Reset!') });
      els.theme.addEventListener('click', toggleTheme);
      els.export.addEventListener('click', exportCSV);
      els.clear.addEventListener('click', () => { clearScores(); announce('Scores cleared.') });
      els.segmented.querySelectorAll('button').forEach(btn => btn.addEventListener('click', () => {
        els.segmented.querySelectorAll('button').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        config.duration = parseInt(btn.dataset.time, 10);
        els.timeLeft.textContent = config.duration;
        initTest();
        focusInput();
      }));

      // results controls
      els.overlay.addEventListener('click', hideResults);
      els.btnRetry.addEventListener('click', () => { hideResults(); initTest(); focusInput(); });
      els.btnNext.addEventListener('click', () => { hideResults(); initTest(); focusInput(); });

      // focus handling
      document.addEventListener('click', focusInput);
      window.addEventListener('resize', focusInput);
      window.addEventListener('blur', () => state.paused = true);
      window.addEventListener('focus', () => state.paused = false);

      // typing
      els.hiddenInput.addEventListener('keydown', onKey);
      document.addEventListener('keydown', (e) => {
        // Let Esc work even if input loses focus
        if (e.key === 'Escape') { e.preventDefault(); pauseResume(); }
      });

      // paste protection
      els.hiddenInput.addEventListener('paste', e => e.preventDefault());
    }

    function focusInput(){ els.hiddenInput.focus(); }

    function announce(msg){
      const toast = document.createElement('div');
      toast.textContent = msg;
      toast.style.position='fixed'; toast.style.left='50%'; toast.style.top='20px'; toast.style.transform='translateX(-50%)';
      toast.style.background='rgba(0,0,0,.8)'; toast.style.color='white'; toast.style.padding='10px 14px'; toast.style.borderRadius='10px'; toast.style.zIndex=100; toast.style.boxShadow='var(--shadow)'; toast.style.transition='opacity .3s ease';
      toast.style.opacity='0'; document.body.appendChild(toast);
      requestAnimationFrame(()=>{ toast.style.opacity='1'; });
      setTimeout(()=>{ toast.style.opacity='0'; setTimeout(()=>toast.remove(), 300); }, 1600);
    }

    // init
    loadTheme();
    bindControls();
    initTest();
    renderScores();
    focusInput();
  </script>
</body>
</html>
